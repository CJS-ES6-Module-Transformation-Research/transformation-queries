{"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/test/createASTs.test.ts":{"path":"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/test/createASTs.test.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":19},"end":{"line":3,"column":51}},"2":{"start":{"line":4,"column":14},"end":{"line":4,"column":33}},"3":{"start":{"line":5,"column":13},"end":{"line":5,"column":28}},"4":{"start":{"line":6,"column":15},"end":{"line":6,"column":44}},"5":{"start":{"line":7,"column":17},"end":{"line":7,"column":50}},"6":{"start":{"line":8,"column":10},"end":{"line":8,"column":45}},"7":{"start":{"line":9,"column":0},"end":{"line":41,"column":3}},"8":{"start":{"line":11,"column":4},"end":{"line":29,"column":7}},"9":{"start":{"line":14,"column":8},"end":{"line":19,"column":9}},"10":{"start":{"line":15,"column":12},"end":{"line":15,"column":84}},"11":{"start":{"line":18,"column":12},"end":{"line":18,"column":69}},"12":{"start":{"line":20,"column":8},"end":{"line":25,"column":9}},"13":{"start":{"line":21,"column":12},"end":{"line":21,"column":55}},"14":{"start":{"line":24,"column":12},"end":{"line":24,"column":53}},"15":{"start":{"line":26,"column":21},"end":{"line":26,"column":36}},"16":{"start":{"line":27,"column":8},"end":{"line":27,"column":55}},"17":{"start":{"line":28,"column":8},"end":{"line":28,"column":35}},"18":{"start":{"line":30,"column":4},"end":{"line":40,"column":7}},"19":{"start":{"line":33,"column":8},"end":{"line":33,"column":80}},"20":{"start":{"line":34,"column":8},"end":{"line":34,"column":51}},"21":{"start":{"line":35,"column":21},"end":{"line":35,"column":36}},"22":{"start":{"line":37,"column":8},"end":{"line":37,"column":82}},"23":{"start":{"line":38,"column":8},"end":{"line":38,"column":102}},"24":{"start":{"line":39,"column":8},"end":{"line":39,"column":61}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":85},"end":{"line":9,"column":86}},"loc":{"start":{"line":9,"column":97},"end":{"line":41,"column":1}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":29},"end":{"line":11,"column":30}},"loc":{"start":{"line":11,"column":41},"end":{"line":29,"column":5}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":30,"column":62},"end":{"line":30,"column":63}},"loc":{"start":{"line":30,"column":74},"end":{"line":40,"column":5}},"line":30}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},"f":{"0":1,"1":0,"2":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/test/createASTs.test.ts","sources":["/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/test/createASTs.test.ts"],"names":[],"mappings":";;AAAA,oDAAiD;AACjD,kCAAmC;AACnC,6BAA4B;AAE5B,6CAAkD;AAIlD,IAAM,UAAU,GAAG,iCAAiC,CAAC;AACrD,IAAI,GAAG,GAAM,iBAAS,kBAAe,CAAA;AAGrC,QAAQ,CAAC,0EAA0E,EAC/E;IACI,kDAAkD;IAClD,EAAE,CAAC,oBAAoB,EAAE;QACrB,IAAI,MAAM,CAAA;QACV,IAAI,QAAQ,CAAA;QACZ,IAAI;YACA,MAAM,GAAG,wBAAe,CAAI,iBAAS,SAAI,UAAY,CAAC,CAAC;SAC1D;QAAC,OAAO,GAAG,EAAE;YACV,aAAM,CAAC,IAAI,CAAC,mBAAmB,GAAC,GAAG,CAAC,QAAQ,EAAE,CAAE,CAAA;SACnD;QACD,IAAI;YACA,QAAQ,GAAG,uBAAU,CAAC,MAAM,CAAC,CAAA;SAChC;QAAC,OAAO,GAAG,EAAE;YACV,aAAM,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAA;SACpC;QACD,IAAM,MAAM,GAAW,QAAQ,CAAC,MAAM,CAAC;QACvC,aAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,EAAC,KAAG,MAAQ,CAAC,CAAC;QACvC,OAAO,CAAC,GAAG,CAAC,OAAK,MAAQ,CAAC,CAAA;IAC9B,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,qDAAqD,EAAE;QACtD,IAAI,MAAiB,CAAC;QACtB,IAAI,QAAmB,CAAC;QACxB,MAAM,GAAG,wBAAe,CAAI,iBAAS,SAAI,UAAY,CAAC,CAAC;QACvD,QAAQ,GAAG,uBAAU,CAAC,MAAM,CAAC,CAAA;QAC7B,IAAM,MAAM,GAAG,QAAQ,CAAC,IAAI,EAAE,CAAA;QAE9B,aAAa;QACb,aAAM,CAAC,qBAAqB,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QACnE,OAAO,CAAC,GAAG,CAAC,gFAAgF,CAAC,CAAA;QAE7F,aAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAE,MAAM,CAAC,CAAC,CAAC,CAAC,GAAe,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC9D,CAAC,CAAC,CAAA;AACP,CAAC,CAAC,CAAC","sourcesContent":["import {createASTs} from \"../src/ast/CreateASTs\";\nimport {test_root} from \"../index\";\nimport {expect} from \"chai\";\nimport {AstFile, ProjectFS} from \"../src/Types\";\nimport {traverseProject} from '../src/fsys/walker'\nimport {Program, BlockStatement} from 'estree'\nimport exp = require(\"constants\");\n\nconst LOCAL_TEST = `fixtures/Project_VerySimple_dir`;\nlet tmp = `${test_root}/fixtures/tmp`\n\n\ndescribe(\"Running tests on 'initProjectFS which builds new filesystem from project\",\n    () => {\n        // beforeEach('before',()=>{console.log(\"hello\")})\n        it(`Should be two ASTs`, () => {\n            let projFS\n            let astFiles\n            try {\n                projFS = traverseProject(`${test_root}/${LOCAL_TEST}`);\n            } catch (err) {\n                expect.fail(\"first call failed\"+err.toString() )\n            }\n            try {\n                astFiles = createASTs(projFS)\n            } catch (err) {\n                expect.fail(\"second call failed\")\n            }\n            const result: number = astFiles.length;\n            expect(2).to.equal(result,`${result}`);\n            console.log(`2,${result}`)\n        });\n        it(`should be a variable declaration with body length 1`, () => {\n            let projFS: ProjectFS;\n            let astFiles: AstFile[];\n            projFS = traverseProject(`${test_root}/${LOCAL_TEST}`);\n            astFiles = createASTs(projFS)\n            const result = astFiles.sort()\n\n            // @ts-ignore\n            expect('VariableDeclaration').to.equal(result[0].ast.body[0].type);\n            console.log(`VariableDeclaration {(result[0].ast as Program | BlockStatement).body[0].type}`)\n\n            expect(1).to.equal((result[0].ast as Program).body.length);\n         })\n    });"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0138e37139ed5da0c5ca65d1834f34b3ef05acb3"},"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/src/ast/CreateASTs.ts":{"path":"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/src/ast/CreateASTs.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":14},"end":{"line":3,"column":36}},"2":{"start":{"line":4,"column":11},"end":{"line":4,"column":24}},"3":{"start":{"line":5,"column":16},"end":{"line":5,"column":34}},"4":{"start":{"line":7,"column":4},"end":{"line":28,"column":7}},"5":{"start":{"line":8,"column":31},"end":{"line":8,"column":71}},"6":{"start":{"line":10,"column":8},"end":{"line":27,"column":9}},"7":{"start":{"line":11,"column":26},"end":{"line":12,"column":27}},"8":{"start":{"line":13,"column":12},"end":{"line":22,"column":14}},"9":{"start":{"line":25,"column":12},"end":{"line":25,"column":72}},"10":{"start":{"line":26,"column":12},"end":{"line":26,"column":76}},"11":{"start":{"line":30,"column":0},"end":{"line":30,"column":32}}},"fnMap":{"0":{"name":"createASTs","decl":{"start":{"line":6,"column":9},"end":{"line":6,"column":19}},"loc":{"start":{"line":6,"column":29},"end":{"line":29,"column":1}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":16},"end":{"line":8,"column":17}},"loc":{"start":{"line":8,"column":29},"end":{"line":8,"column":73}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":13},"end":{"line":9,"column":14}},"loc":{"start":{"line":9,"column":29},"end":{"line":28,"column":5}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":16,"column":43},"end":{"line":21,"column":29}},"type":"cond-expr","locations":[{"start":{"line":18,"column":22},"end":{"line":20,"column":44}},{"start":{"line":21,"column":22},"end":{"line":21,"column":29}}],"line":16}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1},"f":{"0":0,"1":0,"2":0},"b":{"0":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/src/ast/CreateASTs.ts","sources":["/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/src/ast/CreateASTs.ts"],"names":[],"mappings":";;AACA,qCAAsC;AACtC,yBAAgC;AAChC,mCAAoC;AAEpC,SAAgB,UAAU,CAAC,OAAkB;IACzC,OAAO,OAAO,CAAC,KAAK;SACf,MAAM,CAAC,UAAC,CAAC,IAAK,OAAA,CAAC,CAAC,KAAK,KAAK,iBAAS,CAAC,EAAE,EAAxB,CAAwB,CAAC;SACvC,GAAG,CAAC,UAAC,IAAI;QACN,IAAI;YACA,IAAI,OAAO,GAAW,iBAAY,CAAC,IAAI,CAAC,IAAI,CAAC;iBACxC,QAAQ,EAAE,CAAA;YACf,OAAO;gBACH,GAAG,EAAE,IAAI,CAAC,GAAG;gBACb,QAAQ,EAAE,IAAI,CAAC,QAAQ;gBACvB,GAAG,EAAE,qBAAW,CAAE,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;qBACnC,UAAU,CAAC,IAAI,CAAC;oBACjB,CAAC,CAAC,OAAO;yBACJ,OAAO,CAAC,OAAO;yBACX,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;oBAC5B,CAAC,CAAC,OAAO,CAAC;aACjB,CAAA;SACJ;QAAC,OAAO,GAAG,EAAE;YACV,OAAO,CAAC,GAAG,CAAC,YAAU,GAAG,kBAAa,IAAI,CAAC,QAAU,CAAC,CAAA;YACtD,MAAM,IAAI,KAAK,CAAC,YAAU,GAAG,kBAAa,IAAI,CAAC,QAAU,CAAC,CAAA;SAC7D;IACL,CAAC,CAAC,CAAA;AACV,CAAC;AAtBD,gCAsBC","sourcesContent":["import {AstFile, ProjectFS} from \"../Types\";\nimport {FILE_TYPE} from \"../../index\";\nimport {readFileSync} from \"fs\";\nimport {parseScript} from \"esprima\";\n\nexport function createASTs(project: ProjectFS): AstFile[] {\n    return project.files\n        .filter((f) => f.ftype === FILE_TYPE.JS)\n        .map((file) => {\n            try {\n                let program: string = readFileSync(file.full)\n                    .toString()\n                return {\n                    dir: file.dir,\n                    filePath: file.relative,\n                    ast: parseScript( program.split('\\n')[0]\n                        .startsWith(\"#!\")\n                        ? program\n                            .replace(program\n                                .split('\\n')[0], '')\n                        : program)\n                }\n            } catch (err) {\n                console.log(`ERROR: ${err} in file: ${file.relative}`)\n                throw new Error(`ERROR: ${err} in file: ${file.relative}`)\n            }\n        })\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a00f27c092b14b15eb6698bb572612de062d0558"},"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/index.ts":{"path":"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/index.ts","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":3,"column":62}},"1":{"start":{"line":11,"column":0},"end":{"line":14,"column":2}},"2":{"start":{"line":15,"column":0},"end":{"line":15,"column":84}},"3":{"start":{"line":16,"column":0},"end":{"line":16,"column":60}},"4":{"start":{"line":24,"column":10},"end":{"line":24,"column":15}},"5":{"start":{"line":25,"column":0},"end":{"line":25,"column":18}},"6":{"start":{"line":26,"column":12},"end":{"line":26,"column":19}},"7":{"start":{"line":27,"column":0},"end":{"line":27,"column":22}},"8":{"start":{"line":28,"column":0},"end":{"line":30,"column":2}},"9":{"start":{"line":29,"column":4},"end":{"line":29,"column":42}},"10":{"start":{"line":32,"column":0},"end":{"line":37,"column":62}},"11":{"start":{"line":33,"column":4},"end":{"line":33,"column":28}},"12":{"start":{"line":34,"column":4},"end":{"line":34,"column":32}},"13":{"start":{"line":35,"column":4},"end":{"line":35,"column":33}},"14":{"start":{"line":36,"column":4},"end":{"line":36,"column":37}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":28,"column":14},"end":{"line":28,"column":15}},"loc":{"start":{"line":28,"column":31},"end":{"line":30,"column":1}},"line":28},"1":{"name":"(anonymous_1)","decl":{"start":{"line":32,"column":1},"end":{"line":32,"column":2}},"loc":{"start":{"line":32,"column":22},"end":{"line":37,"column":1}},"line":32}},"branchMap":{"0":{"loc":{"start":{"line":37,"column":15},"end":{"line":37,"column":60}},"type":"binary-expr","locations":[{"start":{"line":37,"column":15},"end":{"line":37,"column":32}},{"start":{"line":37,"column":37},"end":{"line":37,"column":59}}],"line":37}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":1,"11":1,"12":1,"13":1,"14":1},"f":{"0":0,"1":1},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/index.ts","sources":["/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/index.ts"],"names":[],"mappings":";;;AAOA,wDAAwD;AACxD,qBAAqB;AACrB,qBAAqB;AACrB,qBAAqB;AACrB,QAAQ;AACR,6BAA6B;AAC7B,IAAI;AAES,QAAA,UAAU,GAAG;IACtB,GAAG,EAAE,IAAI;IACT,QAAQ,EAAE,IAAI;CACjB,CAAA;AACU,QAAA,SAAS,GAAS,+DAA+D,CAAA;AAC/E,QAAA,QAAQ,GAAc,iBAAS,uBAAoB,CAAC;AAGjE,kDAAkD;AAClD,UAAU;AACV,iCAAiC;AACjC,qBAAqB;AACrB,yBAAyB;AACzB,oBAAoB;AACpB,IAAI;AACJ,IAAM,GAAG,GAAG,KAAK,CAAC;AAEV,kBAAG;AADX,IAAM,KAAK,GAAG,OAAO,CAAC;AACT,sBAAK;AAEL,QAAA,GAAG,GAAG,UAAC,KAAU;IAC1B,OAAO,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;AAC1C,CAAC,CAAC;AAEF,IAAY,SAKX;AALD,WAAY,SAAS;IACjB,uBAAQ,CAAA;IACR,2BAAY,CAAA;IACZ,4BAAa,CAAA;IACb,gCAAiB,CAAA;AACrB,CAAC,EALW,SAAS,GAAT,iBAAS,KAAT,iBAAS,QAKpB;AAGD,gDAAgD;AAChD,EAAE;AACF,mCAAmC;AACnC,yBAAyB;AACzB,4BAA4B;AAC5B,yCAAyC;AACzC,iDAAiD;AACjD,6CAA6C;AAC7C,wCAAwC;AACxC,oDAAoD;AACpD,eAAe;AACf,6BAA6B;AAC7B,2CAA2C;AAC3C,8BAA8B;AAC9B,oBAAoB;AACpB,wDAAwD;AACxD,iCAAiC;AACjC,gDAAgD;AAChD,6CAA6C;AAC7C,wBAAwB;AACxB,oBAAoB;AACpB,iBAAiB;AACjB,0BAA0B;AAC1B,qCAAqC;AACrC,kCAAkC;AAClC,gBAAgB;AAChB,aAAa;AACb,wBAAwB;AACxB,6CAA6C;AAC7C,gCAAgC;AAChC,oBAAoB;AACpB,oDAAoD;AACpD,8BAA8B;AAC9B,gDAAgD;AAChD,2CAA2C;AAC3C,yBAAyB;AACzB,gCAAgC;AAChC,gDAAgD;AAChD,6CAA6C;AAC7C,wBAAwB;AACxB,oBAAoB;AACpB,iBAAiB;AACjB,8BAA8B;AAC9B,YAAY;AACZ,QAAQ;AACR,IAAI;AACJ,EAAE;AACF,EAAE;AACF,0CAA0C;AAC1C,EAAE;AACF,mCAAmC;AACnC,4BAA4B;AAC5B,6CAA6C;AAC7C,yCAAyC;AACzC,EAAE;AACF,EAAE;AACF,eAAe;AACf,uCAAuC;AACvC,0BAA0B;AAC1B,gBAAgB;AAChB,oDAAoD;AACpD,6BAA6B;AAC7B,4CAA4C;AAC5C,mCAAmC;AACnC,oBAAoB;AACpB,gBAAgB;AAChB,aAAa;AACb,sBAAsB;AACtB,iCAAiC;AACjC,8BAA8B;AAC9B,yBAAyB;AACzB,YAAY;AACZ,QAAQ;AACR,IAAI;AACJ,EAAE","sourcesContent":["#!/Users/sam/.nvm/versions/node/v12.16.0/bin/ts-node\n\n\n// @ts-ignore\nimport * as relative_ from 'relative';\n\n\n// export let relative = function (a:string, b:string) {\n//     if (!a || !b){\n//     console.log(a)\n//     console.log(b)\n//     }\n//     return relative_(a, b)\n// }\n\nexport const parse_opts = {\n    loc: true,\n    tolerant: true\n}\nexport let test_root:string =`/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/test`\nexport const test_dir: string = `${test_root}/fixtures/test_dir`;\n\n\n// export let parseAST = (ast, listener = (x) => {\n// }) => {\n//     return (parseScript(ast, {\n//         loc: true,\n//         tolerant: true\n//     }, listener))\n// }\nconst _JS = \".js\";\nconst _JSON = \".json\";\nexport {_JS, _JSON}\n\nexport const JPP = (value: any): string => {\n    return JSON.stringify(value, null, 3);\n};\n\nexport enum FILE_TYPE {\n    JS=\".js\",\n    JSON='.json',\n    OTHER='other',\n    SYMLINK=\"SYMLINK\"\n}\n\n\n// function transformAccessToAccessImport(old) {\n//\n//     let vd = old.declarations[0]\n//     let init = vd.init\n//     let name = vd.id.name\n//     // console.log(JSON.stringify(vd))\n//     let value = init.object.arguments[0].value\n//     let raw = init.object.arguments[0].raw\n//     let propName = init.property.name\n//     let accessName = `_access_to_module_${value}`\n//     return {\n//         importStatement: {\n//             \"type\": \"ImportDeclaration\",\n//             \"specifiers\": [\n//                 {\n//                     \"type\": \"ImportDefaultSpecifier\",\n//                     \"local\": {\n//                         \"type\": \"Identifier\",\n//                         \"name\": accessName\n//                     }\n//                 }\n//             ],\n//             \"source\": {\n//                 \"type\": \"Literal\",\n//                 \"value\": value,\n//             }\n//         },\n//         accessDecl: {\n//             \"type\": \"VariableDeclaration\",\n//             \"declarations\": [\n//                 {\n//                     \"type\": \"VariableDeclarator\",\n//                     \"id\": {\n//                         \"type\": \"Identifier\",\n//                         \"name\": propName\n//                     },\n//                     \"init\": {\n//                         \"type\": \"Identifier\",\n//                         \"name\": accessName\n//                     }\n//                 }\n//             ],\n//             \"kind\": \"const\"\n//         }\n//     }\n// }\n//\n//\n// function transformDefaultRequire(old) {\n//\n//     let vd = old.declarations[0]\n//     let name = vd.id.name\n//     let value = vd.init.arguments[0].value\n//     let raw = vd.init.arguments[0].raw\n//\n//\n//     return {\n//         \"type\": \"ImportDeclaration\",\n//         \"specifiers\": [\n//             {\n//                 \"type\": \"ImportDefaultSpecifier\",\n//                 \"local\": {\n//                     \"type\": \"Identifier\",\n//                     \"name\": name\n//                 }\n//             }\n//         ],\n//         \"source\": {\n//             \"type\": \"Literal\",\n//             \"value\": value,\n//             \"raw\": raw\n//         }\n//     }\n// }\n//\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"38b80a4b1d6e6dca04c3e996b36703f441cac9b5"},"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/src/fsys/walker.ts":{"path":"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/src/fsys/walker.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":11},"end":{"line":6,"column":24}},"4":{"start":{"line":7,"column":13},"end":{"line":7,"column":28}},"5":{"start":{"line":8,"column":14},"end":{"line":8,"column":36}},"6":{"start":{"line":9,"column":17},"end":{"line":9,"column":53}},"7":{"start":{"line":11,"column":17},"end":{"line":11,"column":56}},"8":{"start":{"line":12,"column":19},"end":{"line":12,"column":21}},"9":{"start":{"line":13,"column":18},"end":{"line":13,"column":20}},"10":{"start":{"line":14,"column":4},"end":{"line":14,"column":28}},"11":{"start":{"line":16,"column":8},"end":{"line":23,"column":9}},"12":{"start":{"line":18,"column":16},"end":{"line":18,"column":44}},"13":{"start":{"line":20,"column":16},"end":{"line":20,"column":46}},"14":{"start":{"line":22,"column":16},"end":{"line":22,"column":47}},"15":{"start":{"line":26,"column":17},"end":{"line":26,"column":38}},"16":{"start":{"line":27,"column":8},"end":{"line":56,"column":11}},"17":{"start":{"line":28,"column":26},"end":{"line":28,"column":42}},"18":{"start":{"line":29,"column":12},"end":{"line":55,"column":13}},"19":{"start":{"line":30,"column":26},"end":{"line":30,"column":49}},"20":{"start":{"line":31,"column":16},"end":{"line":37,"column":19}},"21":{"start":{"line":39,"column":17},"end":{"line":55,"column":13}},"22":{"start":{"line":40,"column":16},"end":{"line":40,"column":94}},"23":{"start":{"line":41,"column":16},"end":{"line":41,"column":41}},"24":{"start":{"line":43,"column":17},"end":{"line":55,"column":13}},"25":{"start":{"line":44,"column":26},"end":{"line":44,"column":49}},"26":{"start":{"line":45,"column":16},"end":{"line":51,"column":19}},"27":{"start":{"line":54,"column":16},"end":{"line":54,"column":94}},"28":{"start":{"line":58,"column":4},"end":{"line":62,"column":6}},"29":{"start":{"line":64,"column":0},"end":{"line":64,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"traverseProject","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":24}},"loc":{"start":{"line":10,"column":35},"end":{"line":63,"column":1}},"line":10},"2":{"name":"getFT","decl":{"start":{"line":15,"column":13},"end":{"line":15,"column":18}},"loc":{"start":{"line":15,"column":24},"end":{"line":24,"column":5}},"line":15},"3":{"name":"traverseRecurse","decl":{"start":{"line":25,"column":13},"end":{"line":25,"column":28}},"loc":{"start":{"line":25,"column":34},"end":{"line":57,"column":5}},"line":25},"4":{"name":"(anonymous_4)","decl":{"start":{"line":27,"column":19},"end":{"line":27,"column":20}},"loc":{"start":{"line":27,"column":35},"end":{"line":56,"column":9}},"line":27}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":16,"column":8},"end":{"line":23,"column":9}},"type":"switch","locations":[{"start":{"line":17,"column":12},"end":{"line":18,"column":44}},{"start":{"line":19,"column":12},"end":{"line":20,"column":46}},{"start":{"line":21,"column":12},"end":{"line":22,"column":47}}],"line":16},"4":{"loc":{"start":{"line":29,"column":12},"end":{"line":55,"column":13}},"type":"if","locations":[{"start":{"line":29,"column":12},"end":{"line":55,"column":13}},{"start":{"line":29,"column":12},"end":{"line":55,"column":13}}],"line":29},"5":{"loc":{"start":{"line":39,"column":17},"end":{"line":55,"column":13}},"type":"if","locations":[{"start":{"line":39,"column":17},"end":{"line":55,"column":13}},{"start":{"line":39,"column":17},"end":{"line":55,"column":13}}],"line":39},"6":{"loc":{"start":{"line":43,"column":17},"end":{"line":55,"column":13}},"type":"if","locations":[{"start":{"line":43,"column":17},"end":{"line":55,"column":13}},{"start":{"line":43,"column":17},"end":{"line":55,"column":13}}],"line":43}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1},"f":{"0":1,"1":0,"2":0,"3":0,"4":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[0,0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/src/fsys/walker.ts","sources":["/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/src/fsys/walker.ts"],"names":[],"mappings":";;;;;AAAA,yBAAyC;AACzC,6BAA4B;AAC5B,qCAAqC;AAErC,sDAA+B;AAC/B,SAAgB,eAAe,CAAC,QAAgB;IAC5C,IAAI,MAAM,GAAG,GAAG,GAAG,kBAAQ,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAA;IAE1C,IAAI,QAAQ,GAAuB,EAAE,CAAA;IACrC,IAAI,OAAO,GAAsB,EAAE,CAAA;IACnC,eAAe,CAAC,MAAM,CAAC,CAAC;IAExB,SAAS,KAAK,CAAC,GAAW;QACtB,QAAQ,GAAG,EAAE;YACT,KAAK,iBAAS,CAAC,EAAE;gBACb,OAAO,iBAAS,CAAC,EAAE,CAAA;YACvB,KAAK,iBAAS,CAAC,IAAI;gBACf,OAAO,iBAAS,CAAC,IAAI,CAAA;YACzB;gBACI,OAAO,iBAAS,CAAC,KAAK,CAAA;SAC7B;IACL,CAAC;IAED,SAAS,eAAe,CAAC,GAAU;QAC/B,IAAI,EAAE,GAAiB,gBAAW,CAAC,GAAG,CAAC,CAAC;QACxC,EAAE,CAAC,OAAO,CAAC,UAAC,IAAI;YACZ,IAAI,OAAO,GAAM,GAAG,SAAI,IAAM,CAAA;YAE9B,IAAI,cAAS,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,EAAE;gBAC7B,IAAI,GAAG,GAAG,cAAO,CAAC,OAAO,CAAC,CAAA;gBAC1B,QAAQ,CAAC,IAAI,CAAC;oBACV,GAAG,EAAE,GAAG;oBACR,IAAI,EAAE,IAAI;oBACV,IAAI,EAAE,GAAG,GAAC,GAAG,GAAC,IAAI;oBAClB,KAAK,EAAE,KAAK,CAAC,GAAG,CAAC;oBACjB,QAAQ,EAAE,kBAAQ,CAAE,MAAM,EAAI,GAAG,SAAI,IAAM,CAAC;iBAC/C,CAAC,CAAC;aACN;iBAAM,IAAI,cAAS,CAAC,OAAO,CAAC,CAAC,WAAW,EAAE,EAAE;gBACzC,OAAO,CAAC,IAAI,CAAC,EAAC,GAAG,EAAC,OAAO,EAAE,QAAQ,EAAE,kBAAQ,CAAC,MAAM,EAAC,OAAO,CAAC,EAAC,CAAC,CAAA;gBAC/D,eAAe,CAAC,OAAO,CAAC,CAAA;aAC3B;iBAAK,IAAI,cAAS,CAAC,OAAO,CAAC,CAAC,cAAc,EAAE,EAAC;gBAC1C,IAAI,GAAG,GAAG,cAAO,CAAC,OAAO,CAAC,CAAA;gBAC1B,QAAQ,CAAC,IAAI,CAAC;oBACV,GAAG,EAAE,GAAG;oBACR,IAAI,EAAE,IAAI;oBACV,IAAI,EAAE,GAAG,GAAC,GAAG,GAAC,IAAI;oBAClB,KAAK,EAAE,iBAAS,CAAC,OAAO;oBACxB,QAAQ,EAAE,kBAAQ,CAAE,MAAM,EAAI,GAAG,SAAI,IAAM,CAAC;iBAC/C,CAAC,CAAC;aACN;iBAAI;gBACD,OAAO,CAAC,GAAG,CAAC,wBAAsB,OAAO,iCAA8B,CAAC,CAAA;aAC3E;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IACD,OAAQ;QACJ,OAAO,EAAE,MAAM;QACf,KAAK,EAAE,QAAQ;QACf,IAAI,EAAE,OAAO;KAChB,CAAC;AACN,CAAC;AAtDD,0CAsDC","sourcesContent":["import {lstatSync, readdirSync} from 'fs'\nimport {extname} from 'path'\nimport {FILE_TYPE} from '../../index'\nimport {DirDescript, FileDescript, ProjectFS} from \"../Types\";\nimport relative from 'relative'\nexport function traverseProject(proj_dir: string):ProjectFS {\n    let absDir = '/' + relative('/', proj_dir)\n\n    let files_tr:Array<FileDescript> = []\n    let dirs_tr:Array<DirDescript> = []\n    traverseRecurse(absDir);\n\n    function getFT(ext: string) {\n        switch (ext) {\n            case FILE_TYPE.JS:\n                return FILE_TYPE.JS\n            case FILE_TYPE.JSON:\n                return FILE_TYPE.JSON\n            default:\n                return FILE_TYPE.OTHER\n        }\n    }\n\n    function traverseRecurse(dir:string) {\n        let ls:Array<string> = readdirSync(dir);\n        ls.forEach((file) => {\n            let absFile = `${dir}/${file}`\n\n            if (lstatSync(absFile).isFile()) {\n                let ext = extname(absFile)\n                files_tr.push({\n                    dir: dir,\n                    file: file,\n                    full: dir+'/'+file,\n                    ftype: getFT(ext),\n                    relative: relative( absDir,`${dir}/${file}`)\n                });\n            } else if (lstatSync(absFile).isDirectory()) {\n                dirs_tr.push({dir:absFile, relative: relative(absDir,absFile)})\n                traverseRecurse(absFile)\n            }else if (lstatSync(absFile).isSymbolicLink()){\n                let ext = extname(absFile)\n                files_tr.push({\n                    dir: dir,\n                    file: file,\n                    full: dir+'/'+file,\n                    ftype: FILE_TYPE.SYMLINK,\n                    relative: relative( absDir,`${dir}/${file}`)\n                });\n            }else{\n                console.log(`NONE OF THE ABOVE: ${absFile} is not a file, link or dir!`)\n            }\n        });\n    }\n    return  {\n        project: absDir,\n        files: files_tr,\n        dirs: dirs_tr\n    };\n}\n\n\n\n\n\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5b171b381216b142aef69474c6c3286a89c958b5"},"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/test/detector.test.ts":{"path":"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/test/detector.test.ts","statementMap":{"0":{"start":{"line":3,"column":22},"end":{"line":5,"column":1}},"1":{"start":{"line":4,"column":4},"end":{"line":4,"column":62}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":62}},"3":{"start":{"line":7,"column":10},"end":{"line":7,"column":24}},"4":{"start":{"line":8,"column":13},"end":{"line":8,"column":28}},"5":{"start":{"line":9,"column":33},"end":{"line":9,"column":101}},"6":{"start":{"line":11,"column":10},"end":{"line":11,"column":62}},"7":{"start":{"line":12,"column":0},"end":{"line":17,"column":3}},"8":{"start":{"line":13,"column":4},"end":{"line":16,"column":7}},"9":{"start":{"line":14,"column":21},"end":{"line":14,"column":44}},"10":{"start":{"line":15,"column":8},"end":{"line":15,"column":53}},"11":{"start":{"line":18,"column":0},"end":{"line":23,"column":3}},"12":{"start":{"line":19,"column":4},"end":{"line":22,"column":7}},"13":{"start":{"line":20,"column":21},"end":{"line":20,"column":45}},"14":{"start":{"line":21,"column":8},"end":{"line":21,"column":54}},"15":{"start":{"line":24,"column":0},"end":{"line":29,"column":3}},"16":{"start":{"line":25,"column":4},"end":{"line":28,"column":7}},"17":{"start":{"line":26,"column":21},"end":{"line":26,"column":45}},"18":{"start":{"line":27,"column":8},"end":{"line":27,"column":53}},"19":{"start":{"line":30,"column":0},"end":{"line":35,"column":3}},"20":{"start":{"line":31,"column":4},"end":{"line":34,"column":7}},"21":{"start":{"line":32,"column":21},"end":{"line":32,"column":46}},"22":{"start":{"line":33,"column":8},"end":{"line":33,"column":54}},"23":{"start":{"line":36,"column":0},"end":{"line":41,"column":3}},"24":{"start":{"line":37,"column":4},"end":{"line":40,"column":7}},"25":{"start":{"line":38,"column":21},"end":{"line":38,"column":48}},"26":{"start":{"line":39,"column":8},"end":{"line":39,"column":51}},"27":{"start":{"line":42,"column":0},"end":{"line":47,"column":3}},"28":{"start":{"line":43,"column":4},"end":{"line":46,"column":7}},"29":{"start":{"line":44,"column":21},"end":{"line":44,"column":49}},"30":{"start":{"line":45,"column":8},"end":{"line":45,"column":57}},"31":{"start":{"line":48,"column":0},"end":{"line":53,"column":3}},"32":{"start":{"line":49,"column":4},"end":{"line":52,"column":7}},"33":{"start":{"line":50,"column":21},"end":{"line":50,"column":48}},"34":{"start":{"line":51,"column":8},"end":{"line":51,"column":48}},"35":{"start":{"line":54,"column":0},"end":{"line":59,"column":3}},"36":{"start":{"line":55,"column":4},"end":{"line":58,"column":7}},"37":{"start":{"line":56,"column":21},"end":{"line":56,"column":45}},"38":{"start":{"line":57,"column":8},"end":{"line":57,"column":45}},"39":{"start":{"line":60,"column":0},"end":{"line":65,"column":3}},"40":{"start":{"line":61,"column":4},"end":{"line":64,"column":7}},"41":{"start":{"line":62,"column":21},"end":{"line":62,"column":53}},"42":{"start":{"line":63,"column":8},"end":{"line":63,"column":53}},"43":{"start":{"line":66,"column":0},"end":{"line":71,"column":3}},"44":{"start":{"line":67,"column":4},"end":{"line":70,"column":7}},"45":{"start":{"line":68,"column":21},"end":{"line":68,"column":53}},"46":{"start":{"line":69,"column":8},"end":{"line":69,"column":53}},"47":{"start":{"line":72,"column":0},"end":{"line":77,"column":3}},"48":{"start":{"line":73,"column":4},"end":{"line":76,"column":7}},"49":{"start":{"line":74,"column":21},"end":{"line":74,"column":62}},"50":{"start":{"line":75,"column":8},"end":{"line":75,"column":51}},"51":{"start":{"line":78,"column":0},"end":{"line":83,"column":3}},"52":{"start":{"line":79,"column":4},"end":{"line":82,"column":7}},"53":{"start":{"line":80,"column":21},"end":{"line":80,"column":63}},"54":{"start":{"line":81,"column":8},"end":{"line":81,"column":57}},"55":{"start":{"line":84,"column":0},"end":{"line":89,"column":3}},"56":{"start":{"line":85,"column":4},"end":{"line":88,"column":7}},"57":{"start":{"line":86,"column":21},"end":{"line":86,"column":57}},"58":{"start":{"line":87,"column":8},"end":{"line":87,"column":57}},"59":{"start":{"line":90,"column":0},"end":{"line":95,"column":3}},"60":{"start":{"line":91,"column":4},"end":{"line":94,"column":7}},"61":{"start":{"line":92,"column":21},"end":{"line":92,"column":52}},"62":{"start":{"line":93,"column":8},"end":{"line":93,"column":57}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":56},"end":{"line":3,"column":57}},"loc":{"start":{"line":3,"column":71},"end":{"line":5,"column":1}},"line":3},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":33},"end":{"line":12,"column":34}},"loc":{"start":{"line":12,"column":45},"end":{"line":17,"column":1}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":13,"column":41},"end":{"line":13,"column":42}},"loc":{"start":{"line":13,"column":53},"end":{"line":16,"column":5}},"line":13},"3":{"name":"(anonymous_3)","decl":{"start":{"line":18,"column":43},"end":{"line":18,"column":44}},"loc":{"start":{"line":18,"column":55},"end":{"line":23,"column":1}},"line":18},"4":{"name":"(anonymous_4)","decl":{"start":{"line":19,"column":43},"end":{"line":19,"column":44}},"loc":{"start":{"line":19,"column":55},"end":{"line":22,"column":5}},"line":19},"5":{"name":"(anonymous_5)","decl":{"start":{"line":24,"column":29},"end":{"line":24,"column":30}},"loc":{"start":{"line":24,"column":41},"end":{"line":29,"column":1}},"line":24},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":42},"end":{"line":25,"column":43}},"loc":{"start":{"line":25,"column":54},"end":{"line":28,"column":5}},"line":25},"7":{"name":"(anonymous_7)","decl":{"start":{"line":30,"column":40},"end":{"line":30,"column":41}},"loc":{"start":{"line":30,"column":52},"end":{"line":35,"column":1}},"line":30},"8":{"name":"(anonymous_8)","decl":{"start":{"line":31,"column":44},"end":{"line":31,"column":45}},"loc":{"start":{"line":31,"column":56},"end":{"line":34,"column":5}},"line":31},"9":{"name":"(anonymous_9)","decl":{"start":{"line":36,"column":33},"end":{"line":36,"column":34}},"loc":{"start":{"line":36,"column":45},"end":{"line":41,"column":1}},"line":36},"10":{"name":"(anonymous_10)","decl":{"start":{"line":37,"column":43},"end":{"line":37,"column":44}},"loc":{"start":{"line":37,"column":55},"end":{"line":40,"column":5}},"line":37},"11":{"name":"(anonymous_11)","decl":{"start":{"line":42,"column":41},"end":{"line":42,"column":42}},"loc":{"start":{"line":42,"column":53},"end":{"line":47,"column":1}},"line":42},"12":{"name":"(anonymous_12)","decl":{"start":{"line":43,"column":50},"end":{"line":43,"column":51}},"loc":{"start":{"line":43,"column":62},"end":{"line":46,"column":5}},"line":43},"13":{"name":"(anonymous_13)","decl":{"start":{"line":48,"column":18},"end":{"line":48,"column":19}},"loc":{"start":{"line":48,"column":30},"end":{"line":53,"column":1}},"line":48},"14":{"name":"(anonymous_14)","decl":{"start":{"line":49,"column":37},"end":{"line":49,"column":38}},"loc":{"start":{"line":49,"column":49},"end":{"line":52,"column":5}},"line":49},"15":{"name":"(anonymous_15)","decl":{"start":{"line":54,"column":39},"end":{"line":54,"column":40}},"loc":{"start":{"line":54,"column":51},"end":{"line":59,"column":1}},"line":54},"16":{"name":"(anonymous_16)","decl":{"start":{"line":55,"column":37},"end":{"line":55,"column":38}},"loc":{"start":{"line":55,"column":49},"end":{"line":58,"column":5}},"line":55},"17":{"name":"(anonymous_17)","decl":{"start":{"line":60,"column":35},"end":{"line":60,"column":36}},"loc":{"start":{"line":60,"column":47},"end":{"line":65,"column":1}},"line":60},"18":{"name":"(anonymous_18)","decl":{"start":{"line":61,"column":65},"end":{"line":61,"column":66}},"loc":{"start":{"line":61,"column":77},"end":{"line":64,"column":5}},"line":61},"19":{"name":"(anonymous_19)","decl":{"start":{"line":66,"column":42},"end":{"line":66,"column":43}},"loc":{"start":{"line":66,"column":54},"end":{"line":71,"column":1}},"line":66},"20":{"name":"(anonymous_20)","decl":{"start":{"line":67,"column":66},"end":{"line":67,"column":67}},"loc":{"start":{"line":67,"column":78},"end":{"line":70,"column":5}},"line":67},"21":{"name":"(anonymous_21)","decl":{"start":{"line":72,"column":48},"end":{"line":72,"column":49}},"loc":{"start":{"line":72,"column":60},"end":{"line":77,"column":1}},"line":72},"22":{"name":"(anonymous_22)","decl":{"start":{"line":73,"column":30},"end":{"line":73,"column":31}},"loc":{"start":{"line":73,"column":42},"end":{"line":76,"column":5}},"line":73},"23":{"name":"(anonymous_23)","decl":{"start":{"line":78,"column":56},"end":{"line":78,"column":57}},"loc":{"start":{"line":78,"column":68},"end":{"line":83,"column":1}},"line":78},"24":{"name":"(anonymous_24)","decl":{"start":{"line":79,"column":64},"end":{"line":79,"column":65}},"loc":{"start":{"line":79,"column":76},"end":{"line":82,"column":5}},"line":79},"25":{"name":"(anonymous_25)","decl":{"start":{"line":84,"column":42},"end":{"line":84,"column":43}},"loc":{"start":{"line":84,"column":54},"end":{"line":89,"column":1}},"line":84},"26":{"name":"(anonymous_26)","decl":{"start":{"line":85,"column":52},"end":{"line":85,"column":53}},"loc":{"start":{"line":85,"column":64},"end":{"line":88,"column":5}},"line":85},"27":{"name":"(anonymous_27)","decl":{"start":{"line":90,"column":45},"end":{"line":90,"column":46}},"loc":{"start":{"line":90,"column":57},"end":{"line":95,"column":1}},"line":90},"28":{"name":"(anonymous_28)","decl":{"start":{"line":91,"column":57},"end":{"line":91,"column":58}},"loc":{"start":{"line":91,"column":69},"end":{"line":94,"column":5}},"line":91}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":22},"end":{"line":5,"column":1}},"type":"binary-expr","locations":[{"start":{"line":3,"column":23},"end":{"line":3,"column":27}},{"start":{"line":3,"column":31},"end":{"line":3,"column":51}},{"start":{"line":3,"column":56},"end":{"line":5,"column":1}}],"line":3},"1":{"loc":{"start":{"line":4,"column":11},"end":{"line":4,"column":61}},"type":"cond-expr","locations":[{"start":{"line":4,"column":37},"end":{"line":4,"column":40}},{"start":{"line":4,"column":43},"end":{"line":4,"column":61}}],"line":4},"2":{"loc":{"start":{"line":4,"column":12},"end":{"line":4,"column":33}},"type":"binary-expr","locations":[{"start":{"line":4,"column":12},"end":{"line":4,"column":15}},{"start":{"line":4,"column":19},"end":{"line":4,"column":33}}],"line":4}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":1,"12":1,"13":0,"14":0,"15":1,"16":1,"17":0,"18":0,"19":1,"20":1,"21":0,"22":0,"23":1,"24":1,"25":0,"26":0,"27":1,"28":1,"29":0,"30":0,"31":1,"32":1,"33":0,"34":0,"35":1,"36":1,"37":0,"38":0,"39":1,"40":1,"41":0,"42":0,"43":1,"44":1,"45":0,"46":0,"47":1,"48":1,"49":0,"50":0,"51":1,"52":1,"53":0,"54":0,"55":1,"56":1,"57":0,"58":0,"59":1,"60":1,"61":0,"62":0},"f":{"0":1,"1":1,"2":0,"3":1,"4":0,"5":1,"6":0,"7":1,"8":0,"9":1,"10":0,"11":1,"12":0,"13":1,"14":0,"15":1,"16":0,"17":1,"18":0,"19":1,"20":0,"21":1,"22":0,"23":1,"24":0,"25":1,"26":0,"27":1,"28":0},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/test/detector.test.ts","sources":["/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/test/detector.test.ts"],"names":[],"mappings":"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","sourcesContent":["#!/Users/sam/.nvm/versions/node/v12.16.0/bin/ts-node\n\nimport { test_dir as dir} from '../'\nimport {expect} from 'chai'\nimport RequireStringTransformer from \"../src/sanitize/requireStringTransformer\";\n\n\n// let dir =\nlet dtc: RequireStringTransformer = new RequireStringTransformer(dir)\n\n\n\ndescribe(\"'Dot' without slash.\",\n    () => {\n        it(`'.' should become './index.js'`, () => {\n            const result = dtc.getTransformed('.');\n            expect(result).to.equal(\"./index.js\");\n        });\n    });\n\n\ndescribe('Relative parent without slash.',\n    () => {\n        it( `'..' should become '../index.js'`, () => {\n            const result = dtc.getTransformed('..');\n            expect(result).to.equal(\"../index.js\");\n        });\n    });\n\n\ndescribe('\"Dot\" with slash',\n    () => {\n        it(`'./' should become './index.js'`, () => {\n            const result = dtc.getTransformed('./');\n            expect(result).to.equal(\"./index.js\");\n        });\n    });\n\n\ndescribe(\"Relative parent with slash.\",\n    () => {\n        it(`'../' should become '../index.js'`, () => {\n            const result = dtc.getTransformed('../');\n            expect(result).to.equal(\"../index.js\");\n        });\n    });\n\n\ndescribe(\"Ambiguous is JS file\",\n    () => {\n        it(`'./lib' should become './lib.js'`, () => {\n            const result = dtc.getTransformed('./lib');\n            expect(result).to.equal(\"./lib.js\");\n        });\n    });\n\n\ndescribe(\"Ambiguous is Dir so index.js\",\n    () => {\n        it(`'./lib/' should become './lib/index.js'`, () => {\n            const result = dtc.getTransformed('./lib/');\n            expect(result).to.equal(\"./lib/index.js\");\n        });\n    });\n\n\ndescribe(\"npmjs\",\n    () => {\n        it(\"There should be no change.\", () => {\n            const result = dtc.getTransformed('mocha');\n            expect(result).to.equal(\"mocha\");\n        });\n    });\n\n\ndescribe(\"node buitin module require\",\n    () => {\n        it(\"There should be no change.\", () => {\n            const result = dtc.getTransformed('fs');\n            expect(result).to.equal(\"fs\");\n        });\n    });\n\n\ndescribe(\"Absolute path dir test\",\n    () => {\n        it(`'test_dir' with absolute path should become ./index.js`, () => {\n            const result = dtc.getTransformed(dir);\n            expect(result).to.equal(\"./index.js\");\n        });\n    });\n\n\ndescribe(\"Absolute path dir test with /\",\n    () => {\n        it(`'test_dir/' with absolute path should become ./index.js`, () => {\n            const result = dtc.getTransformed(dir);\n            expect(result).to.equal(\"./index.js\");\n        });\n    });\n\n\ndescribe(\"Absolute path references ambiguous.\",\n    () => {\n        it(\"Should see ./lib.js\", () => {\n            const result = dtc.getTransformed(`${dir}/lib`);\n            expect(result).to.equal(\"./lib.js\");\n        });\n    });\n\n\ndescribe(\"Absolute path references ambiguous with '/'\",\n    () => {\n        it(\"Absolute path with lib/ should display ./lib/index.js\", () => {\n            const result = dtc.getTransformed(`${dir}/lib/`);\n            expect(result).to.equal(\"./lib/index.js\");\n        });\n    });\n\ndescribe(\"JSON file test with extension\",\n    () => {\n        it(`Should yield './package.json'--No change.`, () => {\n            const result = dtc.getTransformed('./package.json');\n            expect(result).to.equal(\"./package.json\");\n        });\n    });\n\ndescribe(\"JSON file test without extension\",\n    () => {\n        it(`Should yield './package.json' adding a '.json'`, () => {\n            const result = dtc.getTransformed('./package');\n            expect(result).to.equal(\"./package.json\");\n        });\n    });\n\n\n\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"70f0a03b53584be577080e95315228d9e1d4cf58"},"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/src/sanitize/requireStringTransformer.ts":{"path":"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/src/sanitize/requireStringTransformer.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":13},"end":{"line":6,"column":28}},"4":{"start":{"line":7,"column":11},"end":{"line":7,"column":24}},"5":{"start":{"line":8,"column":14},"end":{"line":8,"column":36}},"6":{"start":{"line":9,"column":17},"end":{"line":9,"column":53}},"7":{"start":{"line":10,"column":46},"end":{"line":64,"column":3}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":31}},"9":{"start":{"line":14,"column":4},"end":{"line":16,"column":6}},"10":{"start":{"line":15,"column":8},"end":{"line":15,"column":50}},"11":{"start":{"line":17,"column":4},"end":{"line":62,"column":6}},"12":{"start":{"line":18,"column":23},"end":{"line":18,"column":41}},"13":{"start":{"line":20,"column":8},"end":{"line":37,"column":9}},"14":{"start":{"line":21,"column":12},"end":{"line":21,"column":24}},"15":{"start":{"line":23,"column":13},"end":{"line":37,"column":9}},"16":{"start":{"line":25,"column":12},"end":{"line":33,"column":13}},"17":{"start":{"line":26,"column":16},"end":{"line":26,"column":99}},"18":{"start":{"line":28,"column":17},"end":{"line":33,"column":13}},"19":{"start":{"line":29,"column":16},"end":{"line":29,"column":101}},"20":{"start":{"line":32,"column":16},"end":{"line":32,"column":40}},"21":{"start":{"line":36,"column":12},"end":{"line":36,"column":50}},"22":{"start":{"line":38,"column":26},"end":{"line":38,"column":72}},"23":{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},"24":{"start":{"line":40,"column":12},"end":{"line":40,"column":45}},"25":{"start":{"line":43,"column":12},"end":{"line":44,"column":32}},"26":{"start":{"line":47,"column":12},"end":{"line":48,"column":55}},"27":{"start":{"line":51,"column":12},"end":{"line":51,"column":99}},"28":{"start":{"line":54,"column":12},"end":{"line":59,"column":13}},"29":{"start":{"line":55,"column":16},"end":{"line":55,"column":58}},"30":{"start":{"line":58,"column":16},"end":{"line":58,"column":29}},"31":{"start":{"line":61,"column":8},"end":{"line":61,"column":27}},"32":{"start":{"line":63,"column":4},"end":{"line":63,"column":36}},"33":{"start":{"line":65,"column":0},"end":{"line":65,"column":60}},"34":{"start":{"line":66,"column":0},"end":{"line":66,"column":43}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":46},"end":{"line":10,"column":47}},"loc":{"start":{"line":10,"column":58},"end":{"line":64,"column":1}},"line":10},"2":{"name":"RequireStringTransformer","decl":{"start":{"line":11,"column":13},"end":{"line":11,"column":37}},"loc":{"start":{"line":11,"column":47},"end":{"line":13,"column":5}},"line":11},"3":{"name":"(anonymous_3)","decl":{"start":{"line":14,"column":49},"end":{"line":14,"column":50}},"loc":{"start":{"line":14,"column":65},"end":{"line":16,"column":5}},"line":14},"4":{"name":"(anonymous_4)","decl":{"start":{"line":17,"column":56},"end":{"line":17,"column":57}},"loc":{"start":{"line":17,"column":72},"end":{"line":62,"column":5}},"line":17},"5":{"name":"isBoth","decl":{"start":{"line":42,"column":17},"end":{"line":42,"column":23}},"loc":{"start":{"line":42,"column":30},"end":{"line":45,"column":9}},"line":42},"6":{"name":"isJS","decl":{"start":{"line":46,"column":17},"end":{"line":46,"column":21}},"loc":{"start":{"line":46,"column":28},"end":{"line":49,"column":9}},"line":46},"7":{"name":"isJSON","decl":{"start":{"line":50,"column":17},"end":{"line":50,"column":23}},"loc":{"start":{"line":50,"column":30},"end":{"line":52,"column":9}},"line":50},"8":{"name":"isDir","decl":{"start":{"line":53,"column":17},"end":{"line":53,"column":22}},"loc":{"start":{"line":53,"column":29},"end":{"line":60,"column":9}},"line":53}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":20,"column":8},"end":{"line":37,"column":9}},"type":"if","locations":[{"start":{"line":20,"column":8},"end":{"line":37,"column":9}},{"start":{"line":20,"column":8},"end":{"line":37,"column":9}}],"line":20},"4":{"loc":{"start":{"line":20,"column":12},"end":{"line":20,"column":60}},"type":"binary-expr","locations":[{"start":{"line":20,"column":12},"end":{"line":20,"column":34}},{"start":{"line":20,"column":38},"end":{"line":20,"column":60}}],"line":20},"5":{"loc":{"start":{"line":23,"column":13},"end":{"line":37,"column":9}},"type":"if","locations":[{"start":{"line":23,"column":13},"end":{"line":37,"column":9}},{"start":{"line":23,"column":13},"end":{"line":37,"column":9}}],"line":23},"6":{"loc":{"start":{"line":23,"column":17},"end":{"line":24,"column":31}},"type":"binary-expr","locations":[{"start":{"line":23,"column":18},"end":{"line":23,"column":34}},{"start":{"line":23,"column":38},"end":{"line":23,"column":81}},{"start":{"line":24,"column":15},"end":{"line":24,"column":31}}],"line":23},"7":{"loc":{"start":{"line":25,"column":12},"end":{"line":33,"column":13}},"type":"if","locations":[{"start":{"line":25,"column":12},"end":{"line":33,"column":13}},{"start":{"line":25,"column":12},"end":{"line":33,"column":13}}],"line":25},"8":{"loc":{"start":{"line":26,"column":31},"end":{"line":26,"column":98}},"type":"cond-expr","locations":[{"start":{"line":26,"column":65},"end":{"line":26,"column":73}},{"start":{"line":26,"column":76},"end":{"line":26,"column":98}}],"line":26},"9":{"loc":{"start":{"line":28,"column":17},"end":{"line":33,"column":13}},"type":"if","locations":[{"start":{"line":28,"column":17},"end":{"line":33,"column":13}},{"start":{"line":28,"column":17},"end":{"line":33,"column":13}}],"line":28},"10":{"loc":{"start":{"line":29,"column":31},"end":{"line":29,"column":100}},"type":"cond-expr","locations":[{"start":{"line":29,"column":65},"end":{"line":29,"column":73}},{"start":{"line":29,"column":76},"end":{"line":29,"column":100}}],"line":29},"11":{"loc":{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},"type":"if","locations":[{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},{"start":{"line":39,"column":8},"end":{"line":41,"column":9}}],"line":39},"12":{"loc":{"start":{"line":39,"column":12},"end":{"line":39,"column":80}},"type":"binary-expr","locations":[{"start":{"line":39,"column":12},"end":{"line":39,"column":44}},{"start":{"line":39,"column":48},"end":{"line":39,"column":80}}],"line":39},"13":{"loc":{"start":{"line":43,"column":20},"end":{"line":44,"column":30}},"type":"binary-expr","locations":[{"start":{"line":43,"column":21},"end":{"line":43,"column":31}},{"start":{"line":43,"column":35},"end":{"line":43,"column":47}},{"start":{"line":44,"column":19},"end":{"line":44,"column":30}}],"line":43},"14":{"loc":{"start":{"line":47,"column":19},"end":{"line":48,"column":54}},"type":"binary-expr","locations":[{"start":{"line":47,"column":19},"end":{"line":47,"column":55}},{"start":{"line":48,"column":19},"end":{"line":48,"column":54}}],"line":47},"15":{"loc":{"start":{"line":51,"column":19},"end":{"line":51,"column":98}},"type":"binary-expr","locations":[{"start":{"line":51,"column":19},"end":{"line":51,"column":57}},{"start":{"line":51,"column":61},"end":{"line":51,"column":98}}],"line":51}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":1,"33":1,"34":1},"f":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0,0],"14":[0,0],"15":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/src/sanitize/requireStringTransformer.ts","sources":["/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/src/sanitize/requireStringTransformer.ts"],"names":[],"mappings":";;;;;AAAA,6BAAqC;AACrC,yBAAwC;AACxC,qCAAsC;AACtC,sDAAgC;AAGhC;IAGI,kCAAY,OAAe;QACvB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAA;IAC1B,CAAC;IAEO,0CAAO,GAAf,UAAgB,IAAY;QACxB,OAAO,cAAO,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAA;IACtC,CAAC;IAGD,iDAAc,GAAd,UAAe,IAAY;QACvB,IAAI,QAAQ,GAAW,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAA;QACzC,IAAI,YAAoB,CAAA;QAGxB,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;YAClD,OAAO,IAAI,CAAA;SACd;aAAM,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;eACrE,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE;YAErB,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE;gBAChB,YAAY,GAAG,cAAO,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,GAAG,WAAG,CAAA;aACtE;iBAAM,IAAI,MAAM,CAAC,QAAQ,CAAC,EAAE;gBACzB,YAAY,GAAG,cAAO,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,GAAG,aAAK,CAAA;aACxE;iBAAM;gBACH,YAAY,GAAG,QAAQ,CAAA;aAC1B;SACJ;aAAM,EAAC,WAAW;YACf,YAAY,GAAG,QAAQ,GAAG,WAAW,CAAA;SACxC;QAED,IAAI,WAAW,GAAW,kBAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,YAAY,CAAC,CAAA;QAE9D,IAAI,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,EAAE;YACtE,WAAW,GAAG,IAAI,GAAG,WAAW,CAAA;SACnC;QAED,SAAS,MAAM,CAAC,IAAY;YAExB,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC;mBAC7B,KAAK,CAAC,IAAI,CAAC,CAAC,CAAA;QACvB,CAAC;QAED,SAAS,IAAI,CAAC,IAAY;YACtB,OAAO,cAAO,CAAC,IAAI,CAAC,KAAK,WAAG;mBACrB,eAAU,CAAC,IAAI,GAAG,WAAG,CAAC,CAAA;QACjC,CAAC;QAED,SAAS,MAAM,CAAC,IAAY;YACxB,OAAO,cAAO,CAAC,IAAI,CAAC,KAAK,aAAK,IAAI,eAAU,CAAC,IAAI,GAAG,aAAK,CAAC,CAAA;QAC9D,CAAC;QAED,SAAS,KAAK,CAAC,IAAY;YACvB,IAAI;gBACA,OAAO,cAAS,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,CAAA;aACvC;YAAC,OAAO,GAAG,EAAE;gBACV,OAAO,KAAK,CAAC;aAChB;QACL,CAAC;QAED,OAAO,WAAW,CAAC;IACvB,CAAC;IAGL,+BAAC;AAAD,CAAC,AAlED,IAkEC;AACO,4DAAwB","sourcesContent":["import {extname, resolve} from 'path'\nimport {existsSync, lstatSync} from 'fs'\nimport {_JS, _JSON} from '../../index'\nimport relative from \"relative\";\n\n\nexport default class RequireStringTransformer {\n    private dirname: string;\n\n    constructor(dirname: string) {\n        this.dirname = dirname\n    }\n\n    private absPath(path: string) {\n        return resolve(this.dirname, path)\n    }\n\n\n    getTransformed(path: string) {\n        let absolute: string = this.absPath(path)\n        let computedPath: string\n\n\n        if (path.charAt(0) !== '.' && path.charAt(0) !== '/') {\n            return path\n        } else if ((isBoth(absolute) && path.lastIndexOf('/') !== (path.length - 1))\n            || !isDir(absolute)) {\n\n            if (isJS(absolute)) {\n                computedPath = extname(absolute) !== \"\" ? absolute : absolute + _JS\n            } else if (isJSON(absolute)) {\n                computedPath = extname(absolute) !== \"\" ? absolute : absolute + _JSON\n            } else {\n                computedPath = absolute\n            }\n        } else {//directory\n            computedPath = absolute + \"/index.js\"\n        }\n\n        let relativized: string = relative(this.dirname, computedPath)\n\n        if (!(relativized.charAt(0) === '.') && !(relativized.charAt(0) === '/')) {\n            relativized = \"./\" + relativized\n        }\n\n        function isBoth(path: string) {\n\n            return ((isJS(path) || isJSON(path))\n                && isDir(path))\n        }\n\n        function isJS(path: string) {\n            return extname(path) === _JS\n                || existsSync(path + _JS)\n        }\n\n        function isJSON(path: string) {\n            return extname(path) === _JSON || existsSync(path + _JSON)\n        }\n\n        function isDir(path: string) {\n            try {\n                return lstatSync(path).isDirectory()\n            } catch (err) {\n                return false;\n            }\n        }\n\n        return relativized;\n    }\n\n\n}\nexport {RequireStringTransformer}\n\n\n\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"372943f5794a4a1ab09454a1b3c14191d2c05e7d"},"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/test/initProjDir.test.ts":{"path":"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/test/initProjDir.test.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":22},"end":{"line":3,"column":56}},"2":{"start":{"line":4,"column":14},"end":{"line":4,"column":33}},"3":{"start":{"line":5,"column":13},"end":{"line":5,"column":28}},"4":{"start":{"line":6,"column":11},"end":{"line":6,"column":24}},"5":{"start":{"line":7,"column":14},"end":{"line":7,"column":30}},"6":{"start":{"line":8,"column":17},"end":{"line":8,"column":50}},"7":{"start":{"line":9,"column":10},"end":{"line":9,"column":45}},"8":{"start":{"line":10,"column":0},"end":{"line":86,"column":3}},"9":{"start":{"line":11,"column":4},"end":{"line":15,"column":7}},"10":{"start":{"line":12,"column":8},"end":{"line":14,"column":9}},"11":{"start":{"line":13,"column":12},"end":{"line":13,"column":53}},"12":{"start":{"line":16,"column":4},"end":{"line":19,"column":7}},"13":{"start":{"line":17,"column":21},"end":{"line":17,"column":101}},"14":{"start":{"line":18,"column":8},"end":{"line":18,"column":76}},"15":{"start":{"line":20,"column":4},"end":{"line":26,"column":7}},"16":{"start":{"line":21,"column":21},"end":{"line":21,"column":93}},"17":{"start":{"line":22,"column":8},"end":{"line":22,"column":55}},"18":{"start":{"line":23,"column":8},"end":{"line":25,"column":9}},"19":{"start":{"line":24,"column":12},"end":{"line":24,"column":53}},"20":{"start":{"line":27,"column":4},"end":{"line":33,"column":7}},"21":{"start":{"line":28,"column":21},"end":{"line":28,"column":93}},"22":{"start":{"line":29,"column":8},"end":{"line":29,"column":54}},"23":{"start":{"line":30,"column":8},"end":{"line":32,"column":9}},"24":{"start":{"line":31,"column":12},"end":{"line":31,"column":53}},"25":{"start":{"line":34,"column":4},"end":{"line":46,"column":7}},"26":{"start":{"line":35,"column":21},"end":{"line":35,"column":93}},"27":{"start":{"line":36,"column":8},"end":{"line":42,"column":25}},"28":{"start":{"line":37,"column":35},"end":{"line":37,"column":75}},"29":{"start":{"line":38,"column":32},"end":{"line":38,"column":41}},"30":{"start":{"line":40,"column":12},"end":{"line":40,"column":31}},"31":{"start":{"line":43,"column":8},"end":{"line":45,"column":9}},"32":{"start":{"line":44,"column":12},"end":{"line":44,"column":53}},"33":{"start":{"line":47,"column":4},"end":{"line":57,"column":7}},"34":{"start":{"line":49,"column":21},"end":{"line":49,"column":93}},"35":{"start":{"line":50,"column":8},"end":{"line":56,"column":25}},"36":{"start":{"line":51,"column":35},"end":{"line":51,"column":77}},"37":{"start":{"line":52,"column":32},"end":{"line":52,"column":41}},"38":{"start":{"line":54,"column":12},"end":{"line":54,"column":31}},"39":{"start":{"line":58,"column":4},"end":{"line":71,"column":7}},"40":{"start":{"line":60,"column":21},"end":{"line":60,"column":93}},"41":{"start":{"line":61,"column":8},"end":{"line":67,"column":25}},"42":{"start":{"line":62,"column":35},"end":{"line":62,"column":78}},"43":{"start":{"line":63,"column":32},"end":{"line":63,"column":41}},"44":{"start":{"line":65,"column":12},"end":{"line":65,"column":31}},"45":{"start":{"line":68,"column":8},"end":{"line":70,"column":9}},"46":{"start":{"line":69,"column":12},"end":{"line":69,"column":53}},"47":{"start":{"line":72,"column":4},"end":{"line":85,"column":7}},"48":{"start":{"line":74,"column":21},"end":{"line":74,"column":93}},"49":{"start":{"line":75,"column":8},"end":{"line":81,"column":25}},"50":{"start":{"line":76,"column":35},"end":{"line":76,"column":80}},"51":{"start":{"line":77,"column":32},"end":{"line":77,"column":41}},"52":{"start":{"line":79,"column":12},"end":{"line":79,"column":31}},"53":{"start":{"line":82,"column":8},"end":{"line":84,"column":9}},"54":{"start":{"line":83,"column":12},"end":{"line":83,"column":53}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":10,"column":85},"end":{"line":10,"column":86}},"loc":{"start":{"line":10,"column":97},"end":{"line":86,"column":1}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":42},"end":{"line":11,"column":43}},"loc":{"start":{"line":11,"column":54},"end":{"line":15,"column":5}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":16,"column":28},"end":{"line":16,"column":29}},"loc":{"start":{"line":16,"column":40},"end":{"line":19,"column":5}},"line":16},"3":{"name":"(anonymous_3)","decl":{"start":{"line":20,"column":31},"end":{"line":20,"column":32}},"loc":{"start":{"line":20,"column":43},"end":{"line":26,"column":5}},"line":20},"4":{"name":"(anonymous_4)","decl":{"start":{"line":27,"column":38},"end":{"line":27,"column":39}},"loc":{"start":{"line":27,"column":50},"end":{"line":33,"column":5}},"line":27},"5":{"name":"(anonymous_5)","decl":{"start":{"line":34,"column":30},"end":{"line":34,"column":31}},"loc":{"start":{"line":34,"column":42},"end":{"line":46,"column":5}},"line":34},"6":{"name":"(anonymous_6)","decl":{"start":{"line":37,"column":20},"end":{"line":37,"column":21}},"loc":{"start":{"line":37,"column":33},"end":{"line":37,"column":77}},"line":37},"7":{"name":"(anonymous_7)","decl":{"start":{"line":38,"column":17},"end":{"line":38,"column":18}},"loc":{"start":{"line":38,"column":30},"end":{"line":38,"column":43}},"line":38},"8":{"name":"(anonymous_8)","decl":{"start":{"line":39,"column":20},"end":{"line":39,"column":21}},"loc":{"start":{"line":39,"column":42},"end":{"line":41,"column":9}},"line":39},"9":{"name":"(anonymous_9)","decl":{"start":{"line":47,"column":32},"end":{"line":47,"column":33}},"loc":{"start":{"line":47,"column":44},"end":{"line":57,"column":5}},"line":47},"10":{"name":"(anonymous_10)","decl":{"start":{"line":51,"column":20},"end":{"line":51,"column":21}},"loc":{"start":{"line":51,"column":33},"end":{"line":51,"column":79}},"line":51},"11":{"name":"(anonymous_11)","decl":{"start":{"line":52,"column":17},"end":{"line":52,"column":18}},"loc":{"start":{"line":52,"column":30},"end":{"line":52,"column":43}},"line":52},"12":{"name":"(anonymous_12)","decl":{"start":{"line":53,"column":20},"end":{"line":53,"column":21}},"loc":{"start":{"line":53,"column":42},"end":{"line":55,"column":9}},"line":53},"13":{"name":"(anonymous_13)","decl":{"start":{"line":58,"column":33},"end":{"line":58,"column":34}},"loc":{"start":{"line":58,"column":45},"end":{"line":71,"column":5}},"line":58},"14":{"name":"(anonymous_14)","decl":{"start":{"line":62,"column":20},"end":{"line":62,"column":21}},"loc":{"start":{"line":62,"column":33},"end":{"line":62,"column":80}},"line":62},"15":{"name":"(anonymous_15)","decl":{"start":{"line":63,"column":17},"end":{"line":63,"column":18}},"loc":{"start":{"line":63,"column":30},"end":{"line":63,"column":43}},"line":63},"16":{"name":"(anonymous_16)","decl":{"start":{"line":64,"column":20},"end":{"line":64,"column":21}},"loc":{"start":{"line":64,"column":42},"end":{"line":66,"column":9}},"line":64},"17":{"name":"(anonymous_17)","decl":{"start":{"line":72,"column":27},"end":{"line":72,"column":28}},"loc":{"start":{"line":72,"column":39},"end":{"line":85,"column":5}},"line":72},"18":{"name":"(anonymous_18)","decl":{"start":{"line":76,"column":20},"end":{"line":76,"column":21}},"loc":{"start":{"line":76,"column":33},"end":{"line":76,"column":82}},"line":76},"19":{"name":"(anonymous_19)","decl":{"start":{"line":77,"column":17},"end":{"line":77,"column":18}},"loc":{"start":{"line":77,"column":30},"end":{"line":77,"column":43}},"line":77},"20":{"name":"(anonymous_20)","decl":{"start":{"line":78,"column":20},"end":{"line":78,"column":21}},"loc":{"start":{"line":78,"column":42},"end":{"line":80,"column":9}},"line":78}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":8},"end":{"line":14,"column":9}},"type":"if","locations":[{"start":{"line":12,"column":8},"end":{"line":14,"column":9}},{"start":{"line":12,"column":8},"end":{"line":14,"column":9}}],"line":12},"1":{"loc":{"start":{"line":23,"column":8},"end":{"line":25,"column":9}},"type":"if","locations":[{"start":{"line":23,"column":8},"end":{"line":25,"column":9}},{"start":{"line":23,"column":8},"end":{"line":25,"column":9}}],"line":23},"2":{"loc":{"start":{"line":30,"column":8},"end":{"line":32,"column":9}},"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":32,"column":9}},{"start":{"line":30,"column":8},"end":{"line":32,"column":9}}],"line":30},"3":{"loc":{"start":{"line":43,"column":8},"end":{"line":45,"column":9}},"type":"if","locations":[{"start":{"line":43,"column":8},"end":{"line":45,"column":9}},{"start":{"line":43,"column":8},"end":{"line":45,"column":9}}],"line":43},"4":{"loc":{"start":{"line":68,"column":8},"end":{"line":70,"column":9}},"type":"if","locations":[{"start":{"line":68,"column":8},"end":{"line":70,"column":9}},{"start":{"line":68,"column":8},"end":{"line":70,"column":9}}],"line":68},"5":{"loc":{"start":{"line":82,"column":8},"end":{"line":84,"column":9}},"type":"if","locations":[{"start":{"line":82,"column":8},"end":{"line":84,"column":9}},{"start":{"line":82,"column":8},"end":{"line":84,"column":9}}],"line":82}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":1,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":0,"25":1,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":1,"34":0,"35":0,"36":0,"37":0,"38":0,"39":1,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":1,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0},"f":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/test/initProjDir.test.ts","sources":["/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/test/initProjDir.test.ts"],"names":[],"mappings":"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","sourcesContent":["import {initProjectFS} from \"../src/io/initProjectFS\";\nimport {FILE_TYPE, test_root} from \"../index\";\nimport {expect} from \"chai\";\nimport {ProjectFS} from \"../src/Types\";\nimport {existsSync, rmdirSync} from \"fs\";\nimport {afterEach} from 'mocha'\n\nconst LOCAL_TEST = `fixtures/Project_VerySimple_dir`;\nlet tmp = `${test_root}/fixtures/tmp`\n\ndescribe(\"Running tests on 'initProjectFS which builds new filesystem from project\",\n    () => {\n        afterEach('after-remove-dir', () => {\n            if (existsSync(tmp)) {\n                rmdirSync(tmp, {recursive: true})\n            }\n        })\n        it(`should end in tmp`, () => {\n\n            const result = initProjectFS(`${test_root}/${LOCAL_TEST}`, tmp).project;\n            expect(`${test_root}/fixtures/tmp`).to.equal(result);\n\n\n        });\n        it(`should be five files`, () => {\n\n            const result: ProjectFS = initProjectFS(`${test_root}/${LOCAL_TEST}`, tmp);\n            expect(5).to.equal(result.files.length);\n            if (existsSync(tmp)) {\n                rmdirSync(tmp, {recursive: true})\n            }\n\n        });\n        it(`should be 1 subdirectories `, () => {\n\n            const result: ProjectFS = initProjectFS(`${test_root}/${LOCAL_TEST}`, tmp);\n            expect(1).to.equal(result.dirs.length);\n            if (existsSync(tmp)) {\n                rmdirSync(tmp, {recursive: true})\n            }\n\n        });\n        it(`should be 2 js file`, () => {\n\n            const result: ProjectFS = initProjectFS(`${test_root}/${LOCAL_TEST}`, tmp);\n            expect(result.files\n                .filter((e) => e.ftype === FILE_TYPE.JS)\n                .map((e) => 1)\n                .reduce(\n                    (prev, curr) => {\n                        return prev + curr;\n                    }, 0))\n                .to.equal(2);\n            if (existsSync(tmp)) {\n                rmdirSync(tmp, {recursive: true})\n            }\n\n        });\n        it(`should be 1 JSON file`, () => {\n            ;\n            const result: ProjectFS = initProjectFS(`${test_root}/${LOCAL_TEST}`, tmp);\n            expect(result.files\n                .filter((e) => e.ftype === FILE_TYPE.JSON)\n                .map((e) => 1)\n                .reduce(\n                    (prev, curr) => {\n                        return prev + curr;\n                    }, 0))\n                .to.equal(1);\n\n        });\n        it(`should be 1 other file`, () => {\n            ;\n            const result: ProjectFS = initProjectFS(`${test_root}/${LOCAL_TEST}`, tmp);\n            expect(result.files\n                .filter((e) => e.ftype === FILE_TYPE.OTHER)\n                .map((e) => 1)\n                .reduce(\n                    (prev, curr) => {\n                        return prev + curr;\n                    }, 0))\n                .to.equal(1);\n            if (existsSync(tmp)) {\n                rmdirSync(tmp, {recursive: true})\n            }\n        });\n        it(`should be 1 link`, () => {\n            ;\n            const result: ProjectFS = initProjectFS(`${test_root}/${LOCAL_TEST}`, tmp);\n\n            expect(result.files\n                .filter((e) => e.ftype === FILE_TYPE.SYMLINK)\n                .map((e) => 1)\n                .reduce(\n                    (prev, curr) => {\n                        return prev + curr;\n                    }, 0))\n                .to.equal(1);\n            if (existsSync(tmp)) {\n                rmdirSync(tmp, {recursive: true})\n            }\n        });\n\n\n    })\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"993bd8473adc922daa560959061edf307bbb5184"},"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/src/io/initProjectFS.ts":{"path":"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/src/io/initProjectFS.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":11},"end":{"line":3,"column":24}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":40}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":55}},"4":{"start":{"line":7,"column":18},"end":{"line":7,"column":55}},"5":{"start":{"line":8,"column":15},"end":{"line":8,"column":68}},"6":{"start":{"line":8,"column":47},"end":{"line":8,"column":65}},"7":{"start":{"line":9,"column":4},"end":{"line":17,"column":7}},"8":{"start":{"line":10,"column":8},"end":{"line":15,"column":9}},"9":{"start":{"line":11,"column":12},"end":{"line":11,"column":73}},"10":{"start":{"line":16,"column":8},"end":{"line":16,"column":47}},"11":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"12":{"start":{"line":19,"column":4},"end":{"line":19,"column":19}},"13":{"start":{"line":21,"column":0},"end":{"line":21,"column":38}}},"fnMap":{"0":{"name":"initProjectFS","decl":{"start":{"line":5,"column":9},"end":{"line":5,"column":22}},"loc":{"start":{"line":5,"column":51},"end":{"line":20,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":32},"end":{"line":8,"column":33}},"loc":{"start":{"line":8,"column":45},"end":{"line":8,"column":67}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":17},"end":{"line":9,"column":18}},"loc":{"start":{"line":9,"column":30},"end":{"line":17,"column":5}},"line":9}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1},"f":{"0":0,"1":0,"2":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/src/io/initProjectFS.ts","sources":["/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/src/io/initProjectFS.ts"],"names":[],"mappings":";;AACA,yBAA6B;AAC7B,yCAA+C;AAE/C,SAAgB,aAAa,CAAC,WAAmB,EAAE,aAAqB;IAGpE,cAAS,CAAC,aAAa,EAAE,EAAC,SAAS,EAAE,IAAI,EAAC,CAAC,CAAA;IAE3C,IAAI,OAAO,GAAc,wBAAe,CAAC,WAAW,CAAC,CAAA;IAGrD,IAAI,IAAI,GAAa,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,UAAC,CAAC,IAAK,OAAA,CAAC,CAAC,QAAQ,EAAV,CAAU,CAAC,CAAA;IACxD,IAAI,CAAC,OAAO,CAAC,UAAC,CAAC;QACX,IAAI;YACA,cAAS,CAAI,aAAa,SAAI,CAAG,EAAE,EAAC,SAAS,EAAE,IAAI,EAAC,CAAC,CAAA;SACxD;QAAC,OAAO,GAAG,EAAE;YACV,4BAA4B;SAC/B;QACD,cAAS,CAAC,CAAC,EAAE,EAAC,SAAS,EAAE,IAAI,EAAC,CAAC,CAAA;IACnC,CAAC,CAAC,CAAA;IACF,OAAO,CAAC,OAAO,GAAG,aAAa,CAAA;IAC/B,OAAO,OAAO,CAAC;AACnB,CAAC;AAnBD,sCAmBC","sourcesContent":["import {ProjectFS} from \"../Types\";\nimport {mkdirSync} from \"fs\";\nimport {traverseProject} from \"../fsys/walker\";\n\nexport function initProjectFS(projectName: string, projectTarget: string): ProjectFS {\n\n\n    mkdirSync(projectTarget, {recursive: true})\n\n    let project: ProjectFS = traverseProject(projectName)\n\n\n    let dirs: string[] = project.dirs.map((d) => d.relative)\n    dirs.forEach((d) => {\n        try {\n            mkdirSync(`${projectTarget}/${d}`, {recursive: true})\n        } catch (err) {\n            // console.log( + \" failed\")\n        }\n        mkdirSync(d, {recursive: true})\n    })\n    project.project = projectTarget\n    return project;\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"33fe0762b86ad9b292b887a970562ecd9dd0d43a"},"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/test/projectGen.test.ts":{"path":"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/test/projectGen.test.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":14},"end":{"line":3,"column":33}},"2":{"start":{"line":4,"column":13},"end":{"line":4,"column":28}},"3":{"start":{"line":5,"column":15},"end":{"line":5,"column":44}},"4":{"start":{"line":6,"column":17},"end":{"line":6,"column":50}},"5":{"start":{"line":7,"column":0},"end":{"line":13,"column":3}},"6":{"start":{"line":8,"column":4},"end":{"line":12,"column":7}},"7":{"start":{"line":10,"column":21},"end":{"line":10,"column":91}},"8":{"start":{"line":11,"column":8},"end":{"line":11,"column":77}},"9":{"start":{"line":14,"column":0},"end":{"line":20,"column":3}},"10":{"start":{"line":15,"column":4},"end":{"line":19,"column":7}},"11":{"start":{"line":17,"column":21},"end":{"line":17,"column":83}},"12":{"start":{"line":18,"column":8},"end":{"line":18,"column":55}},"13":{"start":{"line":21,"column":0},"end":{"line":27,"column":3}},"14":{"start":{"line":22,"column":4},"end":{"line":26,"column":7}},"15":{"start":{"line":24,"column":21},"end":{"line":24,"column":83}},"16":{"start":{"line":25,"column":8},"end":{"line":25,"column":54}},"17":{"start":{"line":28,"column":0},"end":{"line":40,"column":3}},"18":{"start":{"line":29,"column":4},"end":{"line":39,"column":7}},"19":{"start":{"line":31,"column":21},"end":{"line":31,"column":83}},"20":{"start":{"line":32,"column":8},"end":{"line":38,"column":25}},"21":{"start":{"line":33,"column":35},"end":{"line":33,"column":75}},"22":{"start":{"line":34,"column":32},"end":{"line":34,"column":41}},"23":{"start":{"line":36,"column":12},"end":{"line":36,"column":31}},"24":{"start":{"line":41,"column":0},"end":{"line":53,"column":3}},"25":{"start":{"line":42,"column":4},"end":{"line":52,"column":7}},"26":{"start":{"line":44,"column":21},"end":{"line":44,"column":83}},"27":{"start":{"line":45,"column":8},"end":{"line":51,"column":25}},"28":{"start":{"line":46,"column":35},"end":{"line":46,"column":77}},"29":{"start":{"line":47,"column":32},"end":{"line":47,"column":41}},"30":{"start":{"line":49,"column":12},"end":{"line":49,"column":31}},"31":{"start":{"line":54,"column":0},"end":{"line":66,"column":3}},"32":{"start":{"line":55,"column":4},"end":{"line":65,"column":7}},"33":{"start":{"line":57,"column":21},"end":{"line":57,"column":83}},"34":{"start":{"line":58,"column":8},"end":{"line":64,"column":25}},"35":{"start":{"line":59,"column":35},"end":{"line":59,"column":77}},"36":{"start":{"line":60,"column":32},"end":{"line":60,"column":41}},"37":{"start":{"line":62,"column":12},"end":{"line":62,"column":31}},"38":{"start":{"line":67,"column":0},"end":{"line":79,"column":3}},"39":{"start":{"line":68,"column":4},"end":{"line":78,"column":7}},"40":{"start":{"line":70,"column":21},"end":{"line":70,"column":83}},"41":{"start":{"line":71,"column":8},"end":{"line":77,"column":25}},"42":{"start":{"line":72,"column":35},"end":{"line":72,"column":78}},"43":{"start":{"line":73,"column":32},"end":{"line":73,"column":41}},"44":{"start":{"line":75,"column":12},"end":{"line":75,"column":31}},"45":{"start":{"line":80,"column":0},"end":{"line":92,"column":3}},"46":{"start":{"line":81,"column":4},"end":{"line":91,"column":7}},"47":{"start":{"line":83,"column":21},"end":{"line":83,"column":83}},"48":{"start":{"line":84,"column":8},"end":{"line":90,"column":25}},"49":{"start":{"line":85,"column":35},"end":{"line":85,"column":78}},"50":{"start":{"line":86,"column":32},"end":{"line":86,"column":41}},"51":{"start":{"line":88,"column":12},"end":{"line":88,"column":31}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":22},"end":{"line":7,"column":23}},"loc":{"start":{"line":7,"column":34},"end":{"line":13,"column":1}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":31},"end":{"line":8,"column":32}},"loc":{"start":{"line":8,"column":43},"end":{"line":12,"column":5}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":14,"column":26},"end":{"line":14,"column":27}},"loc":{"start":{"line":14,"column":38},"end":{"line":20,"column":1}},"line":14},"3":{"name":"(anonymous_3)","decl":{"start":{"line":15,"column":31},"end":{"line":15,"column":32}},"loc":{"start":{"line":15,"column":43},"end":{"line":19,"column":5}},"line":15},"4":{"name":"(anonymous_4)","decl":{"start":{"line":21,"column":22},"end":{"line":21,"column":23}},"loc":{"start":{"line":21,"column":34},"end":{"line":27,"column":1}},"line":21},"5":{"name":"(anonymous_5)","decl":{"start":{"line":22,"column":38},"end":{"line":22,"column":39}},"loc":{"start":{"line":22,"column":50},"end":{"line":26,"column":5}},"line":22},"6":{"name":"(anonymous_6)","decl":{"start":{"line":28,"column":21},"end":{"line":28,"column":22}},"loc":{"start":{"line":28,"column":33},"end":{"line":40,"column":1}},"line":28},"7":{"name":"(anonymous_7)","decl":{"start":{"line":29,"column":30},"end":{"line":29,"column":31}},"loc":{"start":{"line":29,"column":42},"end":{"line":39,"column":5}},"line":29},"8":{"name":"(anonymous_8)","decl":{"start":{"line":33,"column":20},"end":{"line":33,"column":21}},"loc":{"start":{"line":33,"column":33},"end":{"line":33,"column":77}},"line":33},"9":{"name":"(anonymous_9)","decl":{"start":{"line":34,"column":17},"end":{"line":34,"column":18}},"loc":{"start":{"line":34,"column":30},"end":{"line":34,"column":43}},"line":34},"10":{"name":"(anonymous_10)","decl":{"start":{"line":35,"column":20},"end":{"line":35,"column":21}},"loc":{"start":{"line":35,"column":42},"end":{"line":37,"column":9}},"line":35},"11":{"name":"(anonymous_11)","decl":{"start":{"line":41,"column":23},"end":{"line":41,"column":24}},"loc":{"start":{"line":41,"column":35},"end":{"line":53,"column":1}},"line":41},"12":{"name":"(anonymous_12)","decl":{"start":{"line":42,"column":32},"end":{"line":42,"column":33}},"loc":{"start":{"line":42,"column":44},"end":{"line":52,"column":5}},"line":42},"13":{"name":"(anonymous_13)","decl":{"start":{"line":46,"column":20},"end":{"line":46,"column":21}},"loc":{"start":{"line":46,"column":33},"end":{"line":46,"column":79}},"line":46},"14":{"name":"(anonymous_14)","decl":{"start":{"line":47,"column":17},"end":{"line":47,"column":18}},"loc":{"start":{"line":47,"column":30},"end":{"line":47,"column":43}},"line":47},"15":{"name":"(anonymous_15)","decl":{"start":{"line":48,"column":20},"end":{"line":48,"column":21}},"loc":{"start":{"line":48,"column":42},"end":{"line":50,"column":9}},"line":48},"16":{"name":"(anonymous_16)","decl":{"start":{"line":54,"column":23},"end":{"line":54,"column":24}},"loc":{"start":{"line":54,"column":35},"end":{"line":66,"column":1}},"line":54},"17":{"name":"(anonymous_17)","decl":{"start":{"line":55,"column":32},"end":{"line":55,"column":33}},"loc":{"start":{"line":55,"column":44},"end":{"line":65,"column":5}},"line":55},"18":{"name":"(anonymous_18)","decl":{"start":{"line":59,"column":20},"end":{"line":59,"column":21}},"loc":{"start":{"line":59,"column":33},"end":{"line":59,"column":79}},"line":59},"19":{"name":"(anonymous_19)","decl":{"start":{"line":60,"column":17},"end":{"line":60,"column":18}},"loc":{"start":{"line":60,"column":30},"end":{"line":60,"column":43}},"line":60},"20":{"name":"(anonymous_20)","decl":{"start":{"line":61,"column":20},"end":{"line":61,"column":21}},"loc":{"start":{"line":61,"column":42},"end":{"line":63,"column":9}},"line":61},"21":{"name":"(anonymous_21)","decl":{"start":{"line":67,"column":30},"end":{"line":67,"column":31}},"loc":{"start":{"line":67,"column":42},"end":{"line":79,"column":1}},"line":67},"22":{"name":"(anonymous_22)","decl":{"start":{"line":68,"column":33},"end":{"line":68,"column":34}},"loc":{"start":{"line":68,"column":45},"end":{"line":78,"column":5}},"line":68},"23":{"name":"(anonymous_23)","decl":{"start":{"line":72,"column":20},"end":{"line":72,"column":21}},"loc":{"start":{"line":72,"column":33},"end":{"line":72,"column":80}},"line":72},"24":{"name":"(anonymous_24)","decl":{"start":{"line":73,"column":17},"end":{"line":73,"column":18}},"loc":{"start":{"line":73,"column":30},"end":{"line":73,"column":43}},"line":73},"25":{"name":"(anonymous_25)","decl":{"start":{"line":74,"column":20},"end":{"line":74,"column":21}},"loc":{"start":{"line":74,"column":42},"end":{"line":76,"column":9}},"line":74},"26":{"name":"(anonymous_26)","decl":{"start":{"line":80,"column":33},"end":{"line":80,"column":34}},"loc":{"start":{"line":80,"column":45},"end":{"line":92,"column":1}},"line":80},"27":{"name":"(anonymous_27)","decl":{"start":{"line":81,"column":27},"end":{"line":81,"column":28}},"loc":{"start":{"line":81,"column":39},"end":{"line":91,"column":5}},"line":81},"28":{"name":"(anonymous_28)","decl":{"start":{"line":85,"column":20},"end":{"line":85,"column":21}},"loc":{"start":{"line":85,"column":33},"end":{"line":85,"column":80}},"line":85},"29":{"name":"(anonymous_29)","decl":{"start":{"line":86,"column":17},"end":{"line":86,"column":18}},"loc":{"start":{"line":86,"column":30},"end":{"line":86,"column":43}},"line":86},"30":{"name":"(anonymous_30)","decl":{"start":{"line":87,"column":20},"end":{"line":87,"column":21}},"loc":{"start":{"line":87,"column":42},"end":{"line":89,"column":9}},"line":87}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":1,"10":1,"11":0,"12":0,"13":1,"14":1,"15":0,"16":0,"17":1,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":1,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":1,"39":1,"40":0,"41":0,"42":0,"43":0,"44":0,"45":1,"46":1,"47":0,"48":0,"49":0,"50":0,"51":0},"f":{"0":1,"1":0,"2":1,"3":0,"4":1,"5":0,"6":1,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":1,"17":0,"18":0,"19":0,"20":0,"21":1,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/test/projectGen.test.ts","sources":["/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/test/projectGen.test.ts"],"names":[],"mappings":"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","sourcesContent":["import {FILE_TYPE, test_root} from \"../index\";\nimport {expect} from \"chai\";\nimport {ProjectFS} from \"../src/Types\";\nimport {traverseProject} from \"../src/fsys/walker\";\n\nconst LOCAL_TEST = `fixtures/Project_VerySimple_dir`;\n\n\ndescribe(\"Proj Name\",\n    () => {\n        it(`should be five files`, () => {\n            ;\n            const result = traverseProject(`${test_root}/${LOCAL_TEST}`).project;\n            expect(`${test_root}/${LOCAL_TEST}`).to.equal(result);\n        });\n    });\n\n\ndescribe(\"CountNumFiles\",\n    () => {\n        it(`should be five files`, () => {\n            ;\n            const result: ProjectFS = traverseProject(`${test_root}/${LOCAL_TEST}`);\n            expect(5).to.equal(result.files.length);\n        });\n    });\n\n\ndescribe(\"CountDirs\",\n    () => {\n        it(`should be 1 subdirectories `, () => {\n            ;\n            const result: ProjectFS = traverseProject(`${test_root}/${LOCAL_TEST}`);\n            expect(1).to.equal(result.dirs.length);\n        });\n    });\n\ndescribe(\"Count JS\",\n    () => {\n        it(`should be 2 js file`, () => {\n            ;\n            const result: ProjectFS = traverseProject(`${test_root}/${LOCAL_TEST}`);\n            expect(result.files\n                .filter((e) => e.ftype === FILE_TYPE.JS)\n                .map((e) => 1)\n                .reduce(\n                    (prev, curr) => {\n                        return prev + curr;\n                    }, 0))\n                .to.equal(2);\n        });\n    });\n\n\ndescribe(\"Count JSON\",\n    () => {\n        it(`should be 1 JSON file`, () => {\n            ;\n            const result: ProjectFS = traverseProject(`${test_root}/${LOCAL_TEST}`);\n\n\n\n            expect(result.files\n                .filter((e) => e.ftype === FILE_TYPE.JSON)\n                .map((e) => 1)\n                .reduce(\n                    (prev, curr) => {\n                        return prev + curr;\n                    }, 0))\n                .to.equal(1);\n\n        });\n    });\n\n\ndescribe(\"Count JSON\",\n    () => {\n        it(`should be 1 JSON file`, () => {\n            ;\n            const result: ProjectFS = traverseProject(`${test_root}/${LOCAL_TEST}`);\n            expect(result.files\n                .filter((e) => e.ftype === FILE_TYPE.JSON)\n                .map((e) => 1)\n                .reduce(\n                    (prev, curr) => {\n                        return prev + curr;\n                    }, 0))\n                .to.equal(1);\n        });\n    });\n\n\ndescribe(\"Count Other files\",\n    () => {\n        it(`should be 1 other file`, () => {\n            ;\n            const result: ProjectFS = traverseProject(`${test_root}/${LOCAL_TEST}`);\n            expect(result.files\n                .filter((e) => e.ftype === FILE_TYPE.OTHER)\n                .map((e) => 1)\n                .reduce(\n                    (prev, curr) => {\n                        return prev + curr;\n                    }, 0))\n                .to.equal(1);\n        });\n    });\n\n\ndescribe(\"Count symlinks files\",\n    () => {\n        it(`should be 1 link`, () => {\n            ;\n            const result: ProjectFS = traverseProject(`${test_root}/${LOCAL_TEST}`);\n            expect(result.files\n                .filter((e) => e.ftype === FILE_TYPE.OTHER)\n                .map((e) => 1)\n                .reduce(\n                    (prev, curr) => {\n                        return prev + curr;\n                    }, 0))\n                .to.equal(1);\n        });\n    });"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"69bbfef05836bafdbcd4376a1c30939665771ca5"},"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/test/sanitize.test.ts":{"path":"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/test/sanitize.test.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":15},"end":{"line":6,"column":44}},"4":{"start":{"line":7,"column":14},"end":{"line":7,"column":33}},"5":{"start":{"line":8,"column":13},"end":{"line":8,"column":28}},"6":{"start":{"line":9,"column":11},"end":{"line":9,"column":24}},"7":{"start":{"line":10,"column":22},"end":{"line":10,"column":69}},"8":{"start":{"line":11,"column":9},"end":{"line":11,"column":35}},"9":{"start":{"line":12,"column":14},"end":{"line":12,"column":34}},"10":{"start":{"line":13,"column":0},"end":{"line":41,"column":3}},"11":{"start":{"line":14,"column":4},"end":{"line":26,"column":7}},"12":{"start":{"line":15,"column":8},"end":{"line":19,"column":11}},"13":{"start":{"line":16,"column":12},"end":{"line":18,"column":13}},"14":{"start":{"line":17,"column":16},"end":{"line":17,"column":55}},"15":{"start":{"line":20,"column":8},"end":{"line":25,"column":11}},"16":{"start":{"line":21,"column":12},"end":{"line":24,"column":13}},"17":{"start":{"line":22,"column":16},"end":{"line":23,"column":79}},"18":{"start":{"line":27,"column":4},"end":{"line":31,"column":7}},"19":{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},"20":{"start":{"line":29,"column":12},"end":{"line":29,"column":37}},"21":{"start":{"line":32,"column":4},"end":{"line":40,"column":7}},"22":{"start":{"line":33,"column":8},"end":{"line":33,"column":56}},"23":{"start":{"line":35,"column":8},"end":{"line":39,"column":11}},"24":{"start":{"line":36,"column":42},"end":{"line":36,"column":91}},"25":{"start":{"line":38,"column":12},"end":{"line":38,"column":74}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":41},"end":{"line":13,"column":42}},"loc":{"start":{"line":13,"column":53},"end":{"line":41,"column":1}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":14,"column":41},"end":{"line":14,"column":42}},"loc":{"start":{"line":14,"column":53},"end":{"line":26,"column":5}},"line":14},"3":{"name":"(anonymous_3)","decl":{"start":{"line":15,"column":45},"end":{"line":15,"column":46}},"loc":{"start":{"line":15,"column":58},"end":{"line":19,"column":9}},"line":15},"4":{"name":"(anonymous_4)","decl":{"start":{"line":20,"column":46},"end":{"line":20,"column":47}},"loc":{"start":{"line":20,"column":59},"end":{"line":25,"column":9}},"line":20},"5":{"name":"(anonymous_5)","decl":{"start":{"line":27,"column":35},"end":{"line":27,"column":36}},"loc":{"start":{"line":27,"column":47},"end":{"line":31,"column":5}},"line":27},"6":{"name":"(anonymous_6)","decl":{"start":{"line":32,"column":21},"end":{"line":32,"column":22}},"loc":{"start":{"line":32,"column":33},"end":{"line":40,"column":5}},"line":32},"7":{"name":"(anonymous_7)","decl":{"start":{"line":36,"column":26},"end":{"line":36,"column":27}},"loc":{"start":{"line":36,"column":40},"end":{"line":36,"column":119}},"line":36},"8":{"name":"(anonymous_8)","decl":{"start":{"line":37,"column":21},"end":{"line":37,"column":22}},"loc":{"start":{"line":37,"column":44},"end":{"line":39,"column":9}},"line":37}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":16,"column":12},"end":{"line":18,"column":13}},"type":"if","locations":[{"start":{"line":16,"column":12},"end":{"line":18,"column":13}},{"start":{"line":16,"column":12},"end":{"line":18,"column":13}}],"line":16},"4":{"loc":{"start":{"line":21,"column":12},"end":{"line":24,"column":13}},"type":"if","locations":[{"start":{"line":21,"column":12},"end":{"line":24,"column":13}},{"start":{"line":21,"column":12},"end":{"line":24,"column":13}}],"line":21},"5":{"loc":{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},{"start":{"line":28,"column":8},"end":{"line":30,"column":9}}],"line":28},"6":{"loc":{"start":{"line":36,"column":42},"end":{"line":36,"column":90}},"type":"binary-expr","locations":[{"start":{"line":36,"column":42},"end":{"line":36,"column":75}},{"start":{"line":36,"column":79},"end":{"line":36,"column":90}}],"line":36}},"s":{"0":1,"1":0,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/test/sanitize.test.ts","sources":["/Users/sam/Dropbox/Spring_20/research_proj/CJS_Transform/test/sanitize.test.ts"],"names":[],"mappings":";;;;;AAAA,6CAAmD;AACnD,kCAAmC;AAEnC,6BAA4B;AAC5B,yBAAoE;AAEpE,sEAA+C;AAE/C,IAAI,EAAE,GAAG,uBAAa,CAAC,EAAE,CAAC;AAC1B,IAAM,OAAO,GAAG,oBAAoB,CAAC;AAErC,QAAQ,CAAC,8BAA8B,EAAE;IACrC,MAAM,CAAC,4BAA4B,EAAE;QACjC,uBAAa,CAAC,IAAI,CAAC,OAAO,CAAC,UAAC,CAAC;YACzB,IAAI,CAAC,eAAU,CAAC,CAAC,CAAC,EAAE;gBAChB,cAAS,CAAC,CAAC,EAAE,EAAC,SAAS,EAAE,IAAI,EAAC,CAAC,CAAA;aAClC;QACL,CAAC,CAAC,CAAC;QACH,uBAAa,CAAC,KAAK,CAAC,OAAO,CAAC,UAAC,CAAC;YAC1B,IAAI,CAAC,eAAU,CAAC,CAAC,CAAC,EAAE;gBAChB,kBAAa,CAAC,CAAC,EAAE,uBAAuB;sBAClC,uDAAuD,CAAC,CAAA;aACjE;QACL,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC;IACH,SAAS,CAAC,mBAAmB,EAAE;QAC3B,IAAI,eAAU,CAAC,OAAO,CAAC,EAAE;YACrB,eAAU,CAAC,OAAO,CAAC,CAAC;SACvB;IACL,CAAC,CAAC,CAAA;IAEF,EAAE,CAAC,YAAY,EAAE;QACb,kBAAa,CAAC,OAAO,EAAE,EAAE,CAAC,eAAe,CAAC,CAAA;QAC1C,qDAAqD;QACrD,wBAAe,CAAC,aAAa,CAAC;aACzB,KAAK,CAAC,MAAM,CAAC,UAAC,EAAE,IAAI,EAAE,CAAC,KAAK,KAAG,iBAAS,CAAC,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAA,CAAA,yBAAyB,CAAA,CAAC,CAAC;aACrF,OAAO,CAAC,UAAC,EAAgB,EAAE,CAAC,EAAE,IAAI;YAC/B,aAAM,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,KAAK,CAAC,iBAAS,CAAC,KAAK,CAAC,CAAC;QACnD,CAAC,CAAC,CAAA;IACV,CAAC,CAAC,CAAC;AACP,CAAC,CAAC,CAAC","sourcesContent":["import {traverseProject} from \"../src/fsys/walker\";\nimport {FILE_TYPE} from \"../index\";\nimport {FileDescript} from \"../src/Types\";\nimport {expect} from \"chai\";\nimport {existsSync, mkdirSync, unlinkSync, writeFileSync} from \"fs\";\n\nimport sanitizeTests from './lib/sanitizeTests'\n\nlet js = sanitizeTests.js;\nconst tmpName = './sanitize/temp.js';\n\ndescribe(`Test Suite for sanitization.`, () => {\n    before('create directory structure', () => {\n        sanitizeTests.dirs.forEach((e) => {\n            if (!existsSync(e)) {\n                mkdirSync(e, {recursive: true})\n            }\n        });\n        sanitizeTests.files.forEach((e) => {\n            if (!existsSync(e)) {\n                writeFileSync(e, 'export const a = 3;\\n'\n                    + 'export default function(a=\"hello\"){console.log(a)};\\n')\n            }\n        });\n    });\n    afterEach(`remove {$tmpName}`, () => {\n        if (existsSync(tmpName)) {\n            unlinkSync(tmpName);\n        }\n    })\n\n    it(`Top level `, () => {\n        writeFileSync(tmpName, js.topLevelRequire)\n        // const result = JSON.stringify(traverse(test_dir));\n        traverseProject('./sanitize/')\n            .files.filter((fd)=>{fd.ftype===FILE_TYPE.JS && fd.relative/*TODO add .XXX = file */})\n            .forEach((FD: FileDescript, i, arrE) => {\n                expect(FD.ftype).to.not.equal(FILE_TYPE.OTHER);\n            })\n    });\n});"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"533fd4a3c91aaa9478b710aa42d10d8fcdefc125"}}